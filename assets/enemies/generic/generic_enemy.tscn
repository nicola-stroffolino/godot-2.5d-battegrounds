[gd_scene load_steps=13 format=3 uid="uid://dk0vubj1v554k"]

[ext_resource type="Script" path="res://src/Enemy.cs" id="1_2ihc8"]
[ext_resource type="SpriteFrames" uid="uid://dv7jc0mwgowe0" path="res://assets/player/player_sprite_frames.tres" id="2_8x5ow"]
[ext_resource type="Shader" path="res://assets/shaders/shadow.gdshader" id="3_74cvt"]
[ext_resource type="Script" path="res://src/FSM.cs" id="4_mnw5b"]
[ext_resource type="Script" path="res://src/states/EnemyIdle.cs" id="5_l6xxs"]
[ext_resource type="Script" path="res://src/states/EnemyWalk.cs" id="6_r47ye"]
[ext_resource type="Script" path="res://src/HitBox.cs" id="7_mac62"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_gmjxb"]
margin = 0.0
radius = 0.3
height = 0.99

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dvo3d"]
render_priority = 0
shader = ExtResource("3_74cvt")
shader_parameter/albedo = Color(0, 0, 0, 1)
shader_parameter/cube_half_size = 1.0
shader_parameter/shadow_opacity = 0.765
shader_parameter/shadow_radius = 0.5
shader_parameter/shadow_spread = 0.232

[sub_resource type="PlaneMesh" id="PlaneMesh_jvaxt"]
material = SubResource("ShaderMaterial_dvo3d")

[sub_resource type="SphereShape3D" id="SphereShape3D_tsrqq"]
radius = 5.0

[sub_resource type="BoxShape3D" id="BoxShape3D_hecgl"]
size = Vector3(0.4, 0.4, 0.4)

[node name="GenericEnemy" type="CharacterBody3D"]
collision_layer = 2
collision_mask = 7
script = ExtResource("1_2ihc8")

[node name="CollisionShape" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_gmjxb")

[node name="Sprite" type="AnimatedSprite3D" parent="."]
unique_name_in_owner = true
layers = 2
offset = Vector2(0.5, 2)
modulate = Color(0.772549, 0.2, 0.254902, 1)
pixel_size = 0.0625
texture_filter = 2
sprite_frames = ExtResource("2_8x5ow")
animation = &"idle_d"
autoplay = "idle_d"

[node name="Shadow" type="MeshInstance3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.49, 0)
mesh = SubResource("PlaneMesh_jvaxt")

[node name="EnemyMovementFSM" type="Node" parent="." node_paths=PackedStringArray("InitialState")]
script = ExtResource("4_mnw5b")
InitialState = NodePath("EnemyIdle")

[node name="EnemyIdle" type="Node" parent="EnemyMovementFSM"]
script = ExtResource("5_l6xxs")

[node name="EnemyWalk" type="Node" parent="EnemyMovementFSM"]
script = ExtResource("6_r47ye")

[node name="DetectionRange" type="Area3D" parent="."]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="DetectionRange"]
shape = SubResource("SphereShape3D_tsrqq")

[node name="HitBox" type="Area3D" parent="."]
collision_layer = 8
collision_mask = 0
monitoring = false
monitorable = false
script = ExtResource("7_mac62")

[node name="CollisionShape3D" type="CollisionShape3D" parent="HitBox"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.500397)
shape = SubResource("BoxShape3D_hecgl")
